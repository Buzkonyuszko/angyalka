<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Secret Santa â€” Fixed</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:#0f0f10;color:#eee;padding:40px;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
  .card{background:#151517;padding:28px;border-radius:12px;width:720px;max-width:95%;box-shadow:0 10px 30px rgba(0,0,0,.6)}
  h1{margin:0 0 8px;font-size:28px;text-align:center}
  p.sub{color:#bdbdbd;margin:6px 0 18px;text-align:center}
  .controls{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
  select,input[type=text]{padding:10px;border-radius:8px;border:1px solid #222;background:#0c0c0d;color:#eee;min-width:200px}
  button{padding:10px 18px;border-radius:8px;border:0;background:#1f6feb;color:#fff;cursor:pointer}
  button:hover{background:#155fd9}
  #result{margin-top:18px;font-size:20px;text-align:center;word-break:break-word;text-align:center;}
</style>
</head>
<body>
<div class="card">
  <h1>Secret Santa (Fixed)</h1>
  <p class="sub">Use the URL hash to see your draw (e.g., <code>#Beni</code>).</p>

  <div class="controls">
    <label>
      Your name:
      <select id="nameSelect"></select>
    </label>
    <button id="drawBtn">See Your Gift ðŸŽ„</button>
  </div>

  <div id="result" aria-live="polite"></div>
</div>

<script>
// All participants
const NAMES = [
  "Beni","Belli","Berci","Edi","Hanna","Malvin",
  "Nati","Nyest","Stangli","Stefan","Venkel","Zorka","Zsofi"
];

// Populate dropdown
const sel = document.getElementById('nameSelect');
NAMES.forEach(n=>{
  const o = document.createElement('option');
  o.value = n; o.textContent = n;
  sel.appendChild(o);
});

const resultEl = document.getElementById('result');

// --- FIXED PRECOMPUTED ASSIGNMENTS ---
// Pre-generated respecting Stefan/Nati rule
const ASSIGNMENTS = {
  "Beni": "Zorka",
  "Belli": "Berci",
  "Berci": "Malvin",
  "Edi": "Hanna",
  "Hanna": "Nyest",
  "Malvin": "Stangli",
  "Nati": "Venkel",
  "Nyest": "Beni",
  "Stangli": "Stefan",
  "Stefan": "Belli",
  "Venkel": "Edi",
  "Zorka": "Zsofi",
  "Zsofi": "Nati"
};

// Draw button
document.getElementById('drawBtn').addEventListener('click', ()=>{
  const me = sel.value;
  if(!ASSIGNMENTS[me]){
    resultEl.textContent = "Error: name not recognized.";
    return;
  }
  resultEl.textContent = `${me}, you drew: ${ASSIGNMENTS[me]}`;
});

// URL hash support
function readHashName(){
  const raw = location.hash || '';
  const name = decodeURIComponent(raw.replace(/^#/, '').trim());
  return name || null;
}

function selectFromHash(){
  const h = readHashName();
  if(h && NAMES.includes(h)){
    sel.value = h;
    resultEl.textContent = `${h}, your Secret Santa draw is ready. Click the button to see.`;
  }
}

window.addEventListener('load', selectFromHash);
window.addEventListener('hashchange', selectFromHash);
</script>
</body>
</html>